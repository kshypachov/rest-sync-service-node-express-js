# Посібник зі збірки та запуску Docker контейнеру для додатку

## Опис

Цей посібник допоможе розгорнути додаток у середовищі Docker

## Зміст

1. [Вимоги](#вимоги)
2. [Змінні оточення](#змінні-оточення)
3. [Як зібрати Docker-образ](#як-зібрати-docker-образ)
4. [Як запустити контейнер](#як-запустити-контейнер)
5. [Перегляд логів](#перегляд-логів)

## Вимоги

- Docker версії 20.10 і вище
- Docker Compose (якщо планується використання)

## Змінні оточення

Додаток підтримує конфігурацію через змінні оточення. Ось основні параметри:

- `PORT`: Порт, на якому буде запущено сервер
- `DB_USER`: Ім'я користувача бази даних.
- `DB_PASSWORD`: Пароль для підключення до бази даних.
- `DB_HOST`: Адреса хоста бази даних.
- `DB_NAME`: Ім'я бази даних.
- `LOG_FILENAME`: Ім'я файлу для логування. Якщо передано порожнє значення, логи будуть виводитися в консоль (stdout).
- `LOG_LEVEL`: Рівень логування (наприклад, `info`, `debug`).
- `LOG_FILEMODE`: Режим роботи з логами (наприклад, `a` — додавання до існуючого файлу або `w` — перезапис).

## Як зібрати Docker-образ

Щоб зібрати Docker-образ, виконайте наступну команду в кореневій директорії проєкту:

```bash
docker build -t my-js-service-app .
```

Ця команда створить Docker-образ з іменем `my-js-service-app`, використовуючи Dockerfile, який знаходиться в поточній директорії.

## Як запустити контейнер

Щоб запустити контейнер з додатком, виконайте команду:

```bash
docker run -it --rm -p 3000:3000 \
    -e DB_USER=myuser \
    -e DB_PASSWORD=mypassword \
    -e DB_HOST=mydbhost \
    -e DB_NAME=mydatabase \
    -e LOG_LEVEL=info \
    -e PORT=3000 \
     my-js-service-app
```

- Прапор `-p 3000:3000` перенаправляє порт 8000 на локальній машині на порт 8000 всередині контейнера.
- Змінні оточення `DB_USER`, `DB_PASSWORD`, `DB_HOST`, `DB_NAME` задають параметри для підключення до бази даних.
- Відсутність змінної `LOG_FILENAME=""` забезпечує виведення логів у консоль (stdout).


## Перегляд логів

Якщо ви налаштовуєте виведення логів у консоль, ви можете переглядати їх за допомогою команди:

```bash
docker logs <container_id>
```

Якщо логи зберігаються у файл (через змінну `LOG_FILENAME` або конфігураційний файл), ви можете налаштувати монтування директорії з логами на локальній машині:

```bash
docker run -it --rm -p 3000:3000 \
    -e LOG_FILENAME="/var/log/app.log" \
    -v $(pwd)/logs:/var/log \
    my-js-service-app
```

Тут `-v $(pwd)/logs:/var/log` монтує локальну директорію для збереження логів.
